<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namesapce 命名空间, 类似于包, 区分不同的sql语句. 例如:区分不同命名空间的selectAll-->
<mapper namespace="table1">
    
<!--    resultType: 返回类型-->
    <select id="selectAll" resultType="entity.Table1">
        select * from table1 order by age limit 10
    </select>
    
<!--    单个参数的查询-->
    <select id="selectById" parameterType="Integer" resultType="entity.Table1">
        select * from table1 where id= #{value}
    </select>
    
<!--    多参数传递-->
    <select id="selectByAgeRange" parameterType="java.util.Map"  resultType="entity.Table1">
        select * from table1
        where
            age between #{min} and #{max}
        order by age
        limit 0,#{limit}
    </select>
    
<!--    
        多表联合查询. 使用LinkedHaspMap保证顺序一致
        key 是查询结果的字段名. value是对应的值, 类型会根据表结构自动判断
-->
    <select id="selectTableMap" resultType="java.util.LinkedHashMap">
       select t1.*,t2.name as teachername
        from table1 t1
        left join table2 t2
        on t1.id= t2.table1_id
    </select>
    
<!--    
        多表联合查询: 将查询结果映射为复杂类型的Java类对象. 
-->
    <resultMap id="rmTable" type="entity.dto.TableDto">
        <!--设置主键-->
        <id property="table1.id" column="id"></id>
        <result property="table1.name" column="name"></result>
        <result property="table1.age" column="age"></result>
        <result property="table1.homeAddress" column="home_address"></result>
        <result property="teacherName" column="teachername"></result>
    </resultMap>
    <select id="selectTableDto" resultMap="rmTable">
          select t1.*,t2.name as teachername
        from table1 t1
        left join table2 t2
        on t1.id= t2.table1_id
    </select>
</mapper>